{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projetos3\\\\react-app\\\\src\\\\Components\\\\FilmeForm.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Grid, TextField, withStyles, FormControl, InputLabel, Select, MenuItem, Button, FormHelperText } from '@material-ui/core';\nimport useForm from \"./useForm\";\nimport { connect } from 'react-redux';\nimport * as actions from '../Actions/filme';\nimport * as actionsGenero from '../Actions/genero';\nimport { useToasts } from 'react-toast-notifications';\nimport dayjs from 'dayjs';\n\nconst styles = theme => ({\n  root: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      minWidth: 230\n    }\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 230\n  },\n  smMargin: {\n    margin: theme.spacing(1)\n  }\n});\n\nconst initialFieldValues = {\n  nome: '',\n  dataCriacao: '',\n  idGenero: '',\n  ativo: ''\n};\n\nconst FilmesForms = ({\n  classes,\n  ...props\n}) => {\n  //toast  \n  const {\n    addToast\n  } = useToasts(); //validação de campos\n\n  const validate = (fieldValues = values) => {\n    let temp = { ...errors\n    }; // if('usuario' in fieldValues)\n    //     temp.usuario = fieldValues.usuario? \"\" : \"Campo Obrigatório.\"\n    // // if(!fieldValues.senha)\n    // //     temp.senha = fieldValues.senha? \"\" : \"Campo Obrigatório.\"\n    // if('senha' in fieldValues)\n    // temp.senha = fieldValues.senha? \"\" : \"Campo Obrigatório.\"\n\n    setErrors({ ...temp\n    }); // if(fieldValues == values){\n    //     return Object.values(temp).every(x => x == \"\")\n    // }\n  };\n\n  const {\n    values,\n    setValues,\n    errors,\n    setErrors,\n    handleInputChange,\n    resetForm\n  } = useForm(initialFieldValues, validate, props.setCurrentId); //material-ui select\n\n  const inputLabel = React.useRef(null);\n  const [labelWidth, setLabelWidth] = React.useState(0);\n  React.useEffect(() => {\n    setLabelWidth(inputLabel.current.offsetWidth);\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault(); //  if(validate()) {\n\n    const onSuccess = () => {\n      resetForm();\n      addToast(\"Submitted successfully\", {\n        appearance: 'success'\n      });\n    }; // values.dataCriacao = dayjs(new Date()).format('YYYY-MM-DD')\n\n\n    values.dataCriacao = dayjs().format('YYYY-MM-DD');\n\n    if (props.currentId == 0) {\n      // if(name == \"incluir\"){\n      props.createFilmes(values, onSuccess); // }            \n    } else {\n      props.updateFilme(props.currentId, values, onSuccess);\n    } //  }\n\n  };\n\n  const onDeleteAll = () => {\n    if (window.confirm('Confirmar exclusão dos registros?')) {\n      props.filmeList.map((record, index) => {\n        props.deleteFilme(record.id, () => addToast(\"Exclusão realizada com sucesso!\", {\n          appearance: 'info'\n        }));\n      });\n    }\n  };\n\n  useEffect(() => {\n    // console.log(props.currentId)\n    if (props.currentId != 0) {\n      setValues({ ...props.filmeList.find(filme => filme.id == props.currentId)\n      });\n      setErrors({});\n    }\n  }, [props.currentId]);\n  useEffect(() => {// props.fecthGenero();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"form\", {\n    autoComplete: \"off\",\n    noValidate: true,\n    className: classes.root,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    Item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, Object.assign({\n    name: \"nome\",\n    variant: \"outlined\",\n    label: \"Nome\",\n    value: values.nome,\n    onChange: handleInputChange\n  }, errors.nome && {\n    error: true,\n    helperText: errors.nome\n  }, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(FormControl, Object.assign({\n    variant: \"outlined\",\n    className: classes.formControl\n  }, errors.idGenero && {\n    error: true\n  }, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(InputLabel, {\n    ref: inputLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, \"Genero\"), /*#__PURE__*/React.createElement(Select, {\n    name: \"genero\",\n    value: values.ativo,\n    onChange: handleInputChange,\n    labelWidth: labelWidth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }, \"Selecione\")), errors.ativo && /*#__PURE__*/React.createElement(FormHelperText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 42\n    }\n  }, errors.ativo)), /*#__PURE__*/React.createElement(FormControl, Object.assign({\n    variant: \"outlined\",\n    className: classes.formControl\n  }, errors.ativo && {\n    error: true\n  }, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(InputLabel, {\n    ref: inputLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }, \"Situa\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(Select, {\n    name: \"ativo\",\n    value: values.ativo,\n    onChange: handleInputChange,\n    labelWidth: labelWidth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 29\n    }\n  }, \"Selecione\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"Ativo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 29\n    }\n  }, \"Ativo\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"Inativo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 29\n    }\n  }, \"Inativo\")), errors.ativo && /*#__PURE__*/React.createElement(FormHelperText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 42\n    }\n  }, errors.ativo)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    variant: \"contained\",\n    color: \"primary\",\n    name: \"incluir\",\n    type: \"submit\",\n    className: classes.smMargin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(\"button\", {\n    variant: \"contained\",\n    name: \"deletar\",\n    type: \"button\",\n    className: classes.smMargin,\n    onClick: onDeleteAll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  }, \"Excluir Lista\")))));\n};\n\nconst mapStateToProps = state => ({\n  filmeList: state.filme.list\n}); // const mapStateToProps = ({filme, genero}) => ({\n//     filmeList: state.filme.list,\n//     generoList: state.genero.list,\n// })\n\n\nconst mapActionToProps = {\n  createFilmes: actions.create,\n  updateFilme: actions.update,\n  deleteFilme: actions.Delete\n};\nexport default connect(mapStateToProps, mapActionToProps)(withStyles(styles)(FilmesForms));","map":{"version":3,"sources":["C:/Projetos3/react-app/src/Components/FilmeForm.js"],"names":["React","useState","useEffect","Grid","TextField","withStyles","FormControl","InputLabel","Select","MenuItem","Button","FormHelperText","useForm","connect","actions","actionsGenero","useToasts","dayjs","styles","theme","root","margin","spacing","minWidth","formControl","smMargin","initialFieldValues","nome","dataCriacao","idGenero","ativo","FilmesForms","classes","props","addToast","validate","fieldValues","values","temp","errors","setErrors","setValues","handleInputChange","resetForm","setCurrentId","inputLabel","useRef","labelWidth","setLabelWidth","current","offsetWidth","handleSubmit","e","preventDefault","onSuccess","appearance","format","currentId","createFilmes","updateFilme","onDeleteAll","window","confirm","filmeList","map","record","index","deleteFilme","id","find","filme","error","helperText","mapStateToProps","state","list","mapActionToProps","create","update","Delete"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Grid, TextField, withStyles, FormControl, InputLabel, Select, MenuItem, Button, FormHelperText } from '@material-ui/core';\r\nimport useForm from \"./useForm\";\r\nimport { connect } from 'react-redux'\r\nimport * as actions from '../Actions/filme'\r\nimport * as actionsGenero from '../Actions/genero'\r\nimport { useToasts } from 'react-toast-notifications'\r\nimport  dayjs  from 'dayjs'\r\n\r\nconst styles = theme =>({\r\n    root: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n            minWidth: 230,\r\n        }\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 230,\r\n    },\r\n    smMargin:{\r\n        margin: theme.spacing(1)\r\n    }\r\n})\r\n\r\nconst initialFieldValues ={\r\n    nome : '',\r\n    dataCriacao : '',\r\n    idGenero : '',\r\n    ativo : ''\r\n}\r\n\r\nconst FilmesForms = ({ classes, ...props }) => {\r\n\r\n    //toast  \r\n    const { addToast } = useToasts()\r\n\r\n    //validação de campos\r\n const validate = (fieldValues = values) => {\r\n    let temp = { ...errors }\r\n    // if('usuario' in fieldValues)\r\n    //     temp.usuario = fieldValues.usuario? \"\" : \"Campo Obrigatório.\"\r\n    // // if(!fieldValues.senha)\r\n    // //     temp.senha = fieldValues.senha? \"\" : \"Campo Obrigatório.\"\r\n    // if('senha' in fieldValues)\r\n    // temp.senha = fieldValues.senha? \"\" : \"Campo Obrigatório.\"\r\n    setErrors({\r\n        ...temp\r\n    })\r\n\r\n    // if(fieldValues == values){\r\n    //     return Object.values(temp).every(x => x == \"\")\r\n    // }\r\n\r\n }\r\n     \r\n    const {\r\n        values,\r\n        setValues,\r\n        errors,\r\n        setErrors,\r\n        handleInputChange,\r\n        resetForm\r\n    } = useForm(initialFieldValues, validate, props.setCurrentId)\r\n\r\n    //material-ui select\r\n    const inputLabel = React.useRef(null);\r\n    const [labelWidth, setLabelWidth] = React.useState(0);\r\n    React.useEffect(() => {\r\n        setLabelWidth(inputLabel.current.offsetWidth);\r\n    }, []);\r\n\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        //  if(validate()) {\r\n            const onSuccess = () => { \r\n                resetForm()\r\n                addToast(\"Submitted successfully\", { appearance: 'success' })\r\n            }\r\n\r\n            // values.dataCriacao = dayjs(new Date()).format('YYYY-MM-DD')\r\n            values.dataCriacao = dayjs().format('YYYY-MM-DD')\r\n           \r\n            if(props.currentId == 0 ){\r\n                // if(name == \"incluir\"){\r\n                     props.createFilmes(values, onSuccess)\r\n                // }            \r\n            }else{\r\n                props.updateFilme(props.currentId,values, onSuccess)\r\n            }    \r\n            \r\n        //  }\r\n    }\r\n\r\n    const onDeleteAll = (() => {\r\n        \r\n        if(window.confirm('Confirmar exclusão dos registros?'))\r\n        {\r\n            props.filmeList.map((record, index) => {\r\n            props.deleteFilme(record.id,() => addToast(\"Exclusão realizada com sucesso!\", { appearance: 'info' }))    \r\n            })\r\n        }       \r\n      })\r\n    \r\n\r\n\r\n    useEffect(() => {\r\n        // console.log(props.currentId)\r\n        if(props.currentId != 0) {\r\n            setValues({\r\n                ...props.filmeList.find(filme => filme.id == props.currentId)\r\n            })\r\n            setErrors({})\r\n           \r\n        }\r\n    }, [props.currentId])\r\n\r\n    useEffect(() => {\r\n\r\n        // props.fecthGenero();\r\n\r\n    }, [])\r\n\r\n    return (\r\n    <form autoComplete=\"off\" noValidate className={classes.root} onSubmit={handleSubmit}>\r\n      <Grid container>\r\n        <Grid Item xs ={6}>\r\n            <TextField\r\n                name= \"nome\"\r\n                variant = \"outlined\"\r\n                label=\"Nome\"\r\n                value={values.nome}\r\n                onChange={handleInputChange}\r\n                {...(errors.nome && { error: true, helperText: errors.nome })}\r\n                \r\n            />\r\n            \r\n\r\n            <FormControl variant=\"outlined\"\r\n                        className={classes.formControl}\r\n                        {...(errors.idGenero && { error: true })}\r\n                    >\r\n                        <InputLabel ref={inputLabel}>Genero</InputLabel>\r\n                        <Select\r\n                            name=\"genero\"\r\n                            value={values.ativo}\r\n                            onChange={handleInputChange}\r\n                            labelWidth={labelWidth}\r\n                        >\r\n                            <MenuItem value=\"\">Selecione</MenuItem>\r\n                            {/* <MenuItem value=\"Ativo\">Ativo</MenuItem>\r\n                            <MenuItem value=\"Inativo\">Inativo</MenuItem> */}\r\n{\r\n                        // props.filmeList.map((record, index) => {\r\n                        //     return (\r\n                        //         <MenuItem value= { record.idGenero.nome } >  { record.idGenero.nome }   </MenuItem>   \r\n                        //     )\r\n                        // })\r\n}\r\n                        </Select>\r\n                        {errors.ativo && <FormHelperText>{errors.ativo}</FormHelperText>}\r\n            </FormControl>\r\n\r\n            \r\n            <FormControl variant=\"outlined\"\r\n                        className={classes.formControl}\r\n                        {...(errors.ativo && { error: true })}\r\n                    >\r\n                        <InputLabel ref={inputLabel}>Situação</InputLabel>\r\n                        <Select\r\n                            name=\"ativo\"\r\n                            value={values.ativo}\r\n                            onChange={handleInputChange}\r\n                            labelWidth={labelWidth}\r\n                        >\r\n                            <MenuItem value=\"\">Selecione</MenuItem>\r\n                            <MenuItem value=\"Ativo\">Ativo</MenuItem>\r\n                            <MenuItem value=\"Inativo\">Inativo</MenuItem>\r\n                        </Select>\r\n                        {errors.ativo && <FormHelperText>{errors.ativo}</FormHelperText>}\r\n            </FormControl>\r\n\r\n            <div>\r\n                <button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    name=\"incluir\"\r\n                    type=\"submit\"\r\n                    className={classes.smMargin}                \r\n                >\r\n                    Submit\r\n                </button>\r\n\r\n                <button\r\n                    variant=\"contained\"\r\n                    name=\"deletar\"\r\n                    type=\"button\"\r\n                    className={classes.smMargin}                \r\n                    onClick={ onDeleteAll }\r\n                >\r\n                    Excluir Lista\r\n                </button>\r\n            </div>\r\n        </Grid>\r\n      </Grid>\r\n\r\n    </form>\r\n  )\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    filmeList: state.filme.list\r\n})\r\n\r\n// const mapStateToProps = ({filme, genero}) => ({\r\n//     filmeList: state.filme.list,\r\n//     generoList: state.genero.list,\r\n// })\r\n  \r\nconst mapActionToProps = {\r\n    createFilmes: actions.create,\r\n    updateFilme: actions.update,\r\n    deleteFilme: actions.Delete\r\n}\r\n\r\nexport default connect(mapStateToProps, mapActionToProps)(withStyles(styles)(FilmesForms));\r\n"]},"metadata":{},"sourceType":"module"}